import{d as D,r as g,l as x,o as l,c as i,b as t,a as n,w as s,t as u,m as L,q as S,F as v,f as $,g as m,h as c,n as w}from"./index-BwxMtfXP.js";import{u as U}from"./useLocationStore-8NkjCPb7.js";import{u as k}from"./useCustomersStore-CPitVRMG.js";import{S as q}from"./customerTypes-C0s5vjj7.js";import{_ as d,a as p,b as F}from"./ButtonComponent.vue_vue_type_script_setup_true_lang-Cr0yePC1.js";import{_ as N}from"./BackRouterLinkComponent.vue_vue_type_script_setup_true_lang-4236_ml8.js";import{_ as B}from"./TextSectionPageComponent.vue_vue_type_script_setup_true_lang-DvKA9nun.js";const A={class:"grid gap-6"},T={id:"list-customer"},z={class:"relative mt-1 ml-2"},E={key:0,class:"text-red-500 text-xs absolute"},K=D({__name:"LocationCreateView",setup(I){const _={id:null,name:"",surname:"",cpf:"",status:q.ATIVO,contacts:{email:"",phone:""},address:{zipCode:"",publicPlace:"",neighborhood:"",city:"",state:""}},V=$(),e=g({error:"",location:{customer:_,movies:"",deliveryDate:""}}),y=U(),f=k();function C(r){r.preventDefault();const a=f.customers.find(o=>`${o.name} ${o.surname}`===e.value.location.customer.name);if(!a){e.value.error="Usuário não encontrado";return}e.value.location.customer={...a},y.addLocationAsync(e.value.location).then(()=>V.push({path:"/location"})).catch(o=>console.log(o))}const h=x(()=>f.customers.filter(r=>r.name.toLocaleLowerCase().includes(e.value.location.customer.name.toLocaleLowerCase())));return(r,a)=>(l(),i(v,null,[t(N,{path:"/location",title:"Voltar"}),t(B,{title:"Criar locação",text:"Digite as informações abaixo para criar sua locação"}),n("form",{class:"mt-8",onSubmit:C},[n("div",A,[t(d,{label:"Cliente","for-name":"customer"},{icon:s(()=>[t(m(c))]),input:s(()=>[t(p,{modelValue:e.value.location.customer.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.location.customer.name=o),placeholder:"Digite o nome do cliente",type:"search",id:"customer",required:"",list:"list-customer"},null,8,["modelValue"]),n("datalist",T,[(l(!0),i(v,null,w(h.value,(o,b)=>(l(),i("option",{key:b},u(o.name)+" "+u(o.surname),1))),128))])]),_:1}),t(d,{label:"Filmes","for-name":"movie"},{icon:s(()=>[t(m(c))]),input:s(()=>[t(p,{placeholder:"Digite seu filme",type:"text",id:"movie",required:"",modelValue:e.value.location.movies,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.location.movies=o)},null,8,["modelValue"])]),_:1}),t(d,{label:"Data da devolução","for-name":"deliveryDate"},{icon:s(()=>[t(m(c))]),input:s(()=>[t(p,{type:"date",id:"deliveryDate",required:"",modelValue:e.value.location.deliveryDate,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.location.deliveryDate=o)},null,8,["modelValue"])]),_:1})]),n("div",z,[e.value.error?(l(),i("span",E,u(e.value.error),1)):L("",!0)]),t(F,{class:"mt-12",title:"Criar locação",type:"submit"}),S(" "+u(e.value.location.deliveryDate),1)],32)],64))}});export{K as default};
