import{d as M,r as x,k as F,l as S,o as c,c as d,a as t,b as r,w as n,t as u,m as $,e as j,F as y,n as h,g as m,p as B,q,s as w,v as N}from"./index-BwxMtfXP.js";import{u as U,c as E,f as _,p}from"./useLocationStore-8NkjCPb7.js";import{_ as R,a as A,b as I}from"./InputSelectBaseComponent.vue_vue_type_script_setup_true_lang-CFG72SYW.js";import{_ as b,b as O,a as g}from"./ButtonComponent.vue_vue_type_script_setup_true_lang-Cr0yePC1.js";import{_ as P}from"./TextSectionPageComponent.vue_vue_type_script_setup_true_lang-DvKA9nun.js";import"./customerTypes-C0s5vjj7.js";const T={class:"flex flex-col gap-4 mb-8 sm:items-center sm:justify-between sm:flex-row sm:mb-10"},z={class:"w-full"},G={class:"flex gap-4 flex-wrap justify-end"},H={class:"relative mt-1 ml-2 flex-1"},J={key:0,class:"text-red-500 text-xs absolute"},K={class:"flex gap-2 justify-center mt-10 sm:mt-2 sm:justify-end"},Q={class:"overflow-auto mt-10 max-h-80 shadow-md"},W={class:"w-full border-collapse border-gray-400 border-solid border text-left min-w-md"},X={class:"border-b border-gray-400 w-full"},Y={class:"text-gray-500 text-sm w-full"},Z={class:"px-3 py-3"},ee={class:"px-3 py-3"},te={class:"px-3 py-3"},ae={class:"px-3 py-3"},se={class:"px-3 py-3"},le={class:"px-3 py-3"},oe={class:"px-3 py-3"},fe=M({__name:"LocationListView",setup(re){const o=U(),e=x({customer:"",status:"",deliveryDate:"",error:""}),a=x([]);F(()=>{a.value=[...o.locations]});const D=S(()=>a.value);function C(){e.value.customer&&!e.value.status&&!e.value.deliveryDate?(a.value=o.locations.filter(l=>l.customer.name.toLowerCase().includes(e.value.customer.toLowerCase())),a.value.length||(e.value.error="Cliente não encontrado",a.value=[...o.locations])):!e.value.customer&&e.value.status&&!e.value.deliveryDate?a.value=o.locations.filter(l=>l.status===e.value.status):!e.value.customer&&!e.value.status&&e.value.deliveryDate?(a.value=o.locations.filter(l=>l.deliveryDate===_(p(e.value.deliveryDate),"dd/MM/yyyy")),a.value.length||(e.value.error="Não temos nenhuma locação nessa data",a.value=[...o.locations])):e.value.customer&&e.value.status&&e.value.deliveryDate?(a.value=o.locations.filter(l=>l.customer.name.toLowerCase().includes(e.value.customer.toLowerCase())&&l.status===e.value.status&&l.deliveryDate===_(p(e.value.deliveryDate),"dd/MM/yyyy")),a.value.length||(e.value.error="Cliente não encontrado",a.value=[...o.locations])):e.value.customer&&e.value.status&&!e.value.deliveryDate?(a.value=o.locations.filter(l=>l.customer.name.toLowerCase().includes(e.value.customer.toLowerCase())&&l.status===e.value.status),a.value.length||(e.value.error="Cliente não encontrado",a.value=[...o.locations])):e.value.customer&&!e.value.status&&e.value.deliveryDate?(a.value=o.locations.filter(l=>l.customer.name.toLowerCase().includes(e.value.customer.toLowerCase())&&l.deliveryDate===_(p(e.value.deliveryDate),"dd/MM/yyyy")),a.value.length||(e.value.error="Cliente não encontrado",a.value=[...o.locations])):e.value.error="Preencha ou selecione no minimo um campo"}function v(){e.value.error=""}function V(){e.value.error="",e.value.customer="",e.value.status="",e.value.deliveryDate=""}function L(){V(),a.value=[...o.locations]}return(l,i)=>{const k=B("RouterLink");return c(),d(y,null,[t("div",T,[t("div",null,[r(P,{title:"Bem-vindo!",text:"Aqui está uma lista de locações."})]),r(k,{to:"/location/create",class:"flex items-center justify-center gap-2 bg-gray-900 h-12 hover:bg-gray-700 duration-200 ease-in box-border p-4 fill-current text-white stroke-2 rounded w-48"},{default:n(()=>[q(" Criar locação ")]),_:1})]),t("div",{class:"text-sm flex justify-end mb-4"},[t("button",{onClick:L,class:"hover:text-brand duration-200"}," Limpar filtros ")]),t("form",z,[t("div",G,[r(b,{"for-name":"customer",class:"w-full flex-1 sm:w-2/4"},{icon:n(()=>[r(m(w))]),input:n(()=>[r(g,{placeholder:"Buscar por cliente",type:"text",id:"customer",required:"",modelValue:e.value.customer,"onUpdate:modelValue":[i[0]||(i[0]=s=>e.value.customer=s),v]},null,8,["modelValue"])]),_:1}),r(b,{"for-name":"deliveryDate",class:"w-full sm:w-1/4"},{icon:n(()=>[r(m(w))]),input:n(()=>[r(g,{type:"date",id:"deliveryDate",required:"",modelValue:e.value.deliveryDate,"onUpdate:modelValue":[i[1]||(i[1]=s=>e.value.deliveryDate=s),v]},null,8,["modelValue"])]),_:1}),r(R,{"for-name":"status",class:"w-full sm:w-1/4"},{icon:n(()=>[r(m(N))]),input:n(()=>[r(A,{id:"status",required:"",modelValue:e.value.status,"onUpdate:modelValue":[i[2]||(i[2]=s=>e.value.status=s),v],list:["Alugado","Entregue"]},null,8,["modelValue"])]),_:1})]),t("div",H,[e.value.error?(c(),d("span",J,u(e.value.error),1)):$("",!0)]),t("div",K,[r(O,{class:"min-w-max",title:"Buscar",onClick:j(C,["prevent"])})])]),t("div",Q,[t("table",W,[t("thead",X,[t("tr",null,[(c(!0),d(y,null,h(m(o).tabs,(s,f)=>(c(),d("th",{class:"px-3 py-3",key:f},u(s),1))),128))])]),t("tbody",Y,[(c(!0),d(y,null,h(D.value,(s,f)=>(c(),d("tr",{key:f,class:"border-b border-gray-400"},[t("td",Z,u(s.id),1),t("td",ee,u(s.customer.name)+" "+u(s.customer.surname),1),t("td",te,u(s.movies),1),t("td",ae,u(s.rentDate),1),t("td",se,u(s.deliveryDate),1),t("td",le,u(s.user.name),1),t("td",oe,[r(I,{title:s.status,color:m(E)[s.status]},null,8,["title","color"])])]))),128))])])])],64)}}});export{fe as default};
